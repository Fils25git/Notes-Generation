<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fila Assistant - CBC Lesson Plan Generator</title>
    <link rel="stylesheet" href="plans.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h2>Fila Assistant <br>CBC Lesson Plan Generator</h2>
            <p>Fill in the required fields below and then tap Fetch Lesson Plan</p>
        </div>

        <!-- Form -->
        <div class="form-container">
            <form id="lessonForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="required">School Name</label>
                        <input type="text" id="schoolName" placeholder="e.g., G.S. Nyakaliro , TTC BICUMBI" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Teacher's Name</label>
                        <input type="text" id="teacherName" placeholder="e.g., IRATURINZE Fils Lambert" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Term</label>
                        <select id="term" required>
                            <option value="">Select Term</option>
                            <option value="I">Term I</option>
                            <option value="II">Term II</option>
                            <option value="III">Term III</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="required">Date</label>
                        <input type="date" id="date" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Subject</label>
                        <input type="text" id="subject" placeholder="e.g., Mathematics, ENGLISH" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Class</label>
                        <input type="text" id="class" placeholder="e.g., P4, S1, S2, L3, L4, Y2 LE" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Unit No</label>
                        <input type="number" id="unitNo" placeholder="e.g., 7" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Lesson No / Total</label>
                        <div class="double-input">
                            <input type="number" id="lessonNo" placeholder="2" required>
                            <input type="number" id="totalLessons" placeholder="10" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="required">Duration (minutes)</label>
                        <input type="number" id="duration" placeholder="e.g., 40" required>
                    </div>

                    <div class="form-group">
                        <label class="required">Class Size</label>
                        <input type="number" id="classSize" placeholder="e.g., 35" required>
                    </div>

                    <div class="form-group full-width">
                        <label class="required">Unit Title</label>
                        <input type="text" id="unitTitle" placeholder="e.g., LEISURE AND SPORTS" required>
                    </div>

                    <div class="form-group full-width">
                        <label class="required">Lesson Title</label>
                        <input type="text" id="lessonTitle" placeholder="e.g., DESCRIBING WHAT YOU LIKE" required>
                    </div>

                    <div class="form-group full-width">
                        <label class="optional">Special Educational Needs (Optional)</label>
                        <input type="text" id="specialNeeds" placeholder="Leave blank if none">
                    </div>

                    <div class="form-group full-width">
                        <label class="optional">References (Optional)</label>
                        <input type="text" id="references" placeholder="e.g., Mathematics book for primary 4">
                    </div>
                </div>

                <button type="submit" class="generate-btn">Fetch Lesson Plan</button>
                <div id="errorMessage" class="error-message"></div>
            </form>
        </div>

        <!-- Result Container -->
        <div id="resultContainer" class="result-container">
            <div class="download-buttons">
                <button class="download-btn btn-word" onclick="copyToWord()">ðŸ“„ Copy to Word</button>
                <button class="download-btn btn-pdf" onclick="window.print()">ðŸ“‘ Print / Save as PDF</button>
            </div>

            <div id="lessonPlanContent" class="lesson-plan"></div>
        </div>
    </div>

    <!-- External JS -->
    <<script>
document.getElementById('lessonForm').addEventListener('submit', function(e) {
    e.preventDefault();
    generateLessonPlan();
});

function generateLessonPlan() {
    // Get form values
    const data = {
        schoolName: document.getElementById('schoolName').value,
        teacherName: document.getElementById('teacherName').value,
        term: document.getElementById('term').value,
        date: document.getElementById('date').value,
        subject: document.getElementById('subject').value,
        class: document.getElementById('class').value,
        unitNo: document.getElementById('unitNo').value,
        lessonNo: document.getElementById('lessonNo').value,
        totalLessons: document.getElementById('totalLessons').value,
        duration: document.getElementById('duration').value,
        classSize: document.getElementById('classSize').value,
        unitTitle: document.getElementById('unitTitle').value,
        lessonTitle: document.getElementById('lessonTitle').value,
        specialNeeds: document.getElementById('specialNeeds').value || "No specific special educational needs identified in this class",
        references: document.getElementById('references').value || `${document.getElementById('subject').value} book for ${document.getElementById('class').value}, Rwanda Education Board curriculum`
    };

    // Get random plan template from plan.js
    const planTemplate = getRandomPlan();

    // Replace placeholders
    let lessonPlanHTML = planTemplate;
    for (const key in data) {
        const regex = new RegExp(`{{${key}}}`, "g");
        lessonPlanHTML = lessonPlanHTML.replace(regex, data[key]);
    }

    // Display lesson plan
    const container = document.getElementById('lessonPlanContent');
    container.innerHTML = lessonPlanHTML;
    document.getElementById('resultContainer').classList.add('show');
    document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
}

// Copy to Word function
function copyToWord() {
    const content = document.getElementById('lessonPlanContent');
    const range = document.createRange();
    range.selectNode(content);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);

    try {
        document.execCommand('copy');
        alert('âœ… Lesson plan copied!\n\nNow:\n1. Open Microsoft Word\n2. Press Ctrl+V (or Cmd+V on Mac) to paste\n3. Save your file');
    } catch (err) {
        alert('Please select the content manually and press Ctrl+C to copy');
    }

    window.getSelection().removeAllRanges();
}
    </script>
    
</body>
  </html>
