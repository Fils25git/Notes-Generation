<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fila Assistant</title>
<meta property="og:description" content="FiLa EduAcademy is an educational website that offers a wide range of educational resources, including exams, learning materials, and study guides for teachers and students across primary and secondary education" />
<meta property="og:image" content="https://raw.githubusercontent.com/Fils25git/fleduportal/refs/heads/main/logo.png" />
<meta property="og:url" content="https://raw.githubusercontent.com/Fils25git/fleduportal/refs/heads/main/logo.png" />

<!-- Word export libraries -->
<script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<style>  
    * { box-sizing: border-box; margin: 0; padding: 0; }  
  
    body {  
        font-family: Arial, sans-serif;  
        background-color: #f0f2f5;  
        color: #333;  
        display: flex;  
        flex-direction: column;  
        min-height: 100vh;  
        padding-top: 60px; /* space for fixed header */  
        padding-bottom: 50px; /* space for fixed footer */  
    }  
  
    header {  
        position: fixed;  
        top: 0;  
        left: 0;  
        width: 100%;  
        background-color: #ffffdd;  
        display: flex;  
        align-items: center;  
        padding: 5px 15px;  
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);  
        z-index: 1000;  
        gap: 10px;  
    }  
  
    .logo-img {  
        width: 36px;  
        height: 36px;  
        border-radius: 50%;  
    }  
  
    header h2 {  
        font-size: 20px;  
        color: green;  
        margin-left: 5px;  
    }  
  
    footer {  
        position: fixed;  
        bottom: 0;  
        left: 0;  
        width: 100%;  
        background-color: #ffffdd;  
        text-align: center;  
        padding: 5px 10px;  
        font-size: 12px;  
        box-shadow: 0 -2px 5px rgba(0,0,0,0.1);  
    }  
  
    footer p {  
        margin: 2px 0;  
        font-weight: 300;  
    }  
  
    main {  
        flex: 1;  
        display: flex;  
        flex-direction: column;  
        align-items: center;  
        width: 100%;  
        padding: 10px 15px;  
    }  
  
    #output {  
        width: 60%;  
        min-height: 60vh;  
        padding: 10px;  
        border-radius: 8px;  
        border: 1px solid #ccc;  
        background-color: #fff;  
        font-size: 16px;  
        font-family: "Times New Roman", Arial, sans-serif;  
        margin-bottom: 15px;  
        overflow-y: auto;  
        resize: vertical;  
    }  
  
    .input-area {  
        display: flex;  
        gap: 10px;  
        width: 60%;  
        margin-bottom: 10px;  
    }  
  
    input, button {  
        padding: 10px;  
        font-size: 14px;  
        border-radius: 6px;  
        border: 1px solid #ccc;  
        flex: 1;  
    }  
  
    button {  
        cursor: pointer;  
        background-color: #00AF00;  
        color: white;  
    }  
  
    button:hover {  
        background-color: #008800;  
    }  
  
    #copy, #saveBtn {  
        background-color: #F3F400;  
    }  
  
    #genBtn {  
        padding: 6px;  
        font-size: 12px;  
        width: 30%;  
    }  
  
    @media (max-width: 768px) {  
        #output, .input-area {  
            width: 90%;  
        }  
  
        header h2 {  
            font-size: 16px;  
        }  
  
        input, button {  
            font-size: 12px;  
            padding: 8px;  
        }  
    }  
</style>
        
</head>

<body>
<header>
    <img src="logo.png" alt="FiLa Assistant Logo" class="logo-img">
    <h2>Fila Assistant</h2>
</header>

<main>
    <textarea id="output" placeholder="Generated notes will appear here... and you will be able to edit them"></textarea>

    <div class="input-area">
        <input type="text" id="topicInput" placeholder="Enter Lesson topic as it is in Student book">
        <button onclick="generateNotes()" id="genBtn">Generate Notes</button>
    </div>

    <div class="input-area">
        <button onclick="copyNotes()" id="copy">Copy Notes</button>
        <button onclick="saveAsWord()" id="saveBtn">Save as Word</button>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
<script>
let htmlNote = "";

// 1. Fetch HTML note
fetch("https://raw.githubusercontent.com/Fils25git/Notes-Generation/main/ENGnotesS3.html")
  .then(res => res.text())
  .then(data => htmlNote = data)
  .catch(err => console.log("Error loading HTML note:", err));

function normalize(text) {
    return text.toLowerCase().replace(/[^\w\s]/g, "").trim();
}

function generateNotes() {
    const input = normalize(document.getElementById("topicInput").value);
    const output = document.getElementById("output");
    output.value = "";

    if (!htmlNote) {
        output.value = "Notes are still loading. Please try again.";
        return;
    }

    const parser = new DOMParser();
    const doc = parser.parseFromString(htmlNote, "text/html");

    // 2. Get all headers H1-H6
    const headers = Array.from(doc.querySelectorAll("h1, h2, h3, h4, h5, h6"));
    let foundHeader = null;
    let headerLevel = 0;

    // üîç Find exact header match
    for (const h of headers) {
        if (normalize(h.textContent) === input) {
            foundHeader = h;
            headerLevel = parseInt(h.tagName.charAt(1));
            break;
        }
    }

    if (!foundHeader) {
        output.value = `Lesson not found: "${input}"\nTip: Use exact header title (H1‚ÄìH6).`;
        return;
    }

    // 3. Collect content until next header of same or higher level
    let content = foundHeader.textContent + " "; // Include header title
    let next = foundHeader.nextElementSibling;

    while (next) {
        const nextTag = next.tagName;
        if (/H[1-6]/.test(nextTag)) {
            const nextLevel = parseInt(nextTag.charAt(1));
            if (nextLevel <= headerLevel) break; // Stop at same/higher level
        }
        // Include paragraphs, list items, or other content
        if (next.tagName === "P" || next.tagName === "LI") {
            content += next.textContent + " ";
        }
        next = next.nextElementSibling;
    }

    // 4. Word-by-word typing effect
    const words = content.split(/\s+/);
    let i = 0;

    function typeWord() {
        if (i < words.length) {
            output.value += words[i] + " ";
            output.scrollTop = output.scrollHeight;

            let delay = 80;
            if (/[.!?]$/.test(words[i])) delay = 300; // pause on punctuation

            i++;
            setTimeout(typeWord, delay);
        }
    }
    typeWord();
}

// COPY
function copyNotes() {
    const textarea = document.getElementById("output");
    textarea.select();
    document.execCommand("copy");
    alert("Notes copied!");
}

// SAVE AS WORD
function saveAsWord() {
    const text = document.getElementById("output").value;
    if (!text.trim()) {
        alert("No notes to save!");
        return;
    }

    const { Document, Packer, Paragraph } = window.docx;

    const doc = new Document({
        sections: [{
            children: text.split("\n").map(line => new Paragraph(line))
        }]
    });

    Packer.toBlob(doc).then(blob => {
        saveAs(blob, "My_Notes.docx");
    });
}
</script>

<footer>
    <p>Email: support@fleduacademy.com</p>
    <p>&copy; 2025 FL EduAcademy. All rights reserved.</p>
</footer>

</body>
           </html>
