<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fila Assistant – CBC Lesson Notes</title>
  <style>
    body { font-family:"Segoe UI",Arial,sans-serif; background:linear-gradient(135deg,#e8f0ff,#f6fbff); margin:0;padding:20px; display:flex; justify-content:center;}
    .container{width:900px; max-width:95%; background:white; padding:25px 30px; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,0.12);}
    h2{text-align:center; color:#1a3d7c; margin-bottom:20px;}
    textarea{width:100%; padding:14px; border-radius:10px; border:1px solid #cfd8ea; font-size:16px; resize:vertical; outline:none; transition:0.2s;}
    textarea:focus{border-color:#4a7cff; box-shadow:0 0 0 3px rgba(74,124,255,0.15);}
    button{margin-top:15px; width:100%; padding:14px; font-size:17px; font-weight:600; border:none; border-radius:10px; background:linear-gradient(135deg,#4a7cff,#2f5de0); color:white; cursor:pointer; transition:0.25s;}
    button:hover{transform:translateY(-1px); box-shadow:0 8px 18px rgba(47,93,224,0.35);}
    #output{margin-top:25px; padding:25px; background:#fbfcff; border-radius:12px; border:1px solid #e2e8ff; line-height:1.7; font-size:16px; color:#222;}
    @media(max-width:600px){body{padding:15px;} .container{padding:20px;}}
  </style>
</head>
<body>
  <div class="container">
    <h2>Fila Assistant – CBC Lesson Notes</h2>
    <textarea id="prompt" rows="4" placeholder="Enter lesson title (e.g. Parts of a Plant)"></textarea>
    <button id="generateBtn">Generate Lesson Notes</button>
    <div id="output"></div>
  </div>

  <script>
    const output = document.getElementById("output");

    document.getElementById("generateBtn").addEventListener("click", async () => {
      const title = document.getElementById("prompt").value.trim();
      if (!title) { output.textContent="Please enter a lesson title."; return; }

      output.textContent = "Generating lesson notes...";

      try {
        const res = await fetch("/.netlify/functions/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ title })
        });

        if (!res.ok) throw new Error("Failed to fetch notes");

        const data = await res.json();
output.textContent = JSON.stringify(data, null, 2);
      } catch (err) {
        output.textContent = "Error: " + err.message;
      }
    });
  </script>
</body>
</html>
